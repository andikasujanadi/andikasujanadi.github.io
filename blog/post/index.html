<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Post - Andika's Blog</title>
    <link rel="icon" type="image/png" href="../../assets/portfolio/beaming-face-with-smiling-eyes_1f601.png" />
    <link rel="stylesheet" href="../../assets/jendelajs/styles.umd.css">
    <script src="../../assets/jendelajs/jendela.umd.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://unpkg.com/@tailwindcss/browser@4"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@tabler/icons-webfont@latest/dist/tabler-icons.min.css" />
    <style type="text/tailwindcss">
        @custom-variant dark (&:where(.dark, .dark *));
        #content{
            pre{
                @apply bg-neutral-800 text-white text-sm rounded-xl p-4 pt-8 font-mono overflow-hidden mb-3 whitespace-pre-wrap;
            }
            .copy-button{
                @apply absolute top-2 right-2 cursor-pointer px-2 py-1 bg-neutral-700 text-white text-xs rounded-md hover:bg-neutral-600;
            }
            .pacman{
                @apply absolute top-2 left-2 h-6;
                font-family: "tabler-icons" !important;
            }
            .pacman::after{
                content: "\eebc \eb0c \eb0c \eb0c \eb0c";
                font-family: "tabler-icons" !important;
            }
            code{
                @apply break-words w-full;
            }
            h1{
                @apply text-3xl font-medium not-first:mt-12 mb-3 font-serif;
            }
            h2{
                @apply text-2xl font-medium not-first:mt-5 mb-3 font-serif;
            }
            h3{
                @apply text-xl font-medium mt-3 mb-3 font-serif;
            }
            p{
                @apply mb-3 last:mb-0;
            }
            ul{
                @apply ps-6;
            }
            li{
                @apply list-disc mb-3;
            }
            a{
                @apply text-blue-500 hover:underline;
            }
        }
    </style>
</head>

<body class="bg-neutral-100 pt-16">
    <div id="setting" class="hidden">
        <div temp-id="settingWindow" class="p-2 flex flex-col gap-1.5">
            <a href="../">
                <div class="border border-neutral-200 bg-white p-2 rounded-xl cursor-pointer font-medium"><i class="ti ti-book me-2"></i>Home</div>
            </a>
            <a href="https://andikasujanadi.github.io/">
                <div class="border border-neutral-200 bg-white p-2 rounded-xl cursor-pointer font-medium"><i class="ti ti-user me-2"></i>Web Profile</div>
            </a>
        </div>
    </div>
    <nav class="flex ps-4 pe-2 fixed top-0 w-full z-10 h-16 max-h-16 border-b border-neutral-200 bg-white">
        <a href="../" class="my-auto me-auto font-medium font-serif text-xl text-clip truncate">Andika's Blog</a>
        <div class="hidden sm:flex me-4">
            <a href="https://andikasujanadi.github.io/"
                class="my-auto font-medium hover:bg-blue-100 hover:text-blue-600 p-2 px-4 rounded-full">Profile</a>
        </div>
        <a href="https://github.com/andikasujanadi" target="_blank"
            class="flex my-auto -ms-2 bg-neutral-100 dark:bg-neutral-800 w-10 min-w-10 h-10 text-center rounded-full border border-neutral-200 dark:border-neutral-700 cursor-pointer">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                class="mx-auto my-auto icon icon-tabler icons-tabler-outline icon-tabler-brand-github">
                <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                <path
                    d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
            </svg>
        </a>
        <a href="https://linkedin.com/in/andikasujanadi" target="_blank"
            class="flex my-auto -ms-2 bg-neutral-100 dark:bg-neutral-800 w-10 min-w-10 h-10 text-center rounded-full border border-neutral-200 dark:border-neutral-700 cursor-pointer">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                class="mx-auto my-auto icon icon-tabler icons-tabler-outline icon-tabler-brand-linkedin">
                <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                <path d="M8 11v5" />
                <path d="M8 8v.01" />
                <path d="M12 16v-5" />
                <path d="M16 16v-3a2 2 0 1 0 -4 0" />
                <path d="M3 7a4 4 0 0 1 4 -4h10a4 4 0 0 1 4 4v10a4 4 0 0 1 -4 4h-10a4 4 0 0 1 -4 -4z" />
            </svg>
        </a>
        <a href="https://instagram.com/andikasujanadi" target="_blank"
            class="flex my-auto -ms-2 bg-neutral-100 dark:bg-neutral-800 w-10 min-w-10 h-10 text-center rounded-full border border-neutral-200 dark:border-neutral-700 cursor-pointer">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                class="mx-auto my-auto icon icon-tabler icons-tabler-outline icon-tabler-brand-instagram">
                <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                <path d="M4 8a4 4 0 0 1 4 -4h8a4 4 0 0 1 4 4v8a4 4 0 0 1 -4 4h-8a4 4 0 0 1 -4 -4z" />
                <path d="M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" />
                <path d="M16.5 7.5v.01" />
            </svg>
        </a>
        <div onclick="openSetting();"
            class="flex my-auto ms-1 sm:ms-2 bg-neutral-100 dark:bg-neutral-800 w-10 min-w-10 h-10 text-center rounded-full border border-neutral-200 dark:border-neutral-700 cursor-pointer">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                class="mx-auto my-auto icon icon-tabler icons-tabler-outline icon-tabler-category-2">
                <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                <path d="M14 4h6v6h-6z" />
                <path d="M4 14h6v6h-6z" />
                <path d="M17 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0" />
                <path d="M7 7m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0" />
            </svg>
        </div>
        </div>
    </nav>
    <h1 id="title" class="transition duration-500 opacity-0 text-xl font-medium font-serif text-center mt-4 px-4"></h1>
    <p id="date" class="transition duration-500 opacity-0 text-center text-neutral-600 text-sm px-4"></p>
    <div id="tags-container" class="transition duration-500 opacity-0 text-center text-sm px-4 flex flex-wrap gap-1 justify-center mt-2"></div>
    <div class="max-w-3xl p-4 mx-auto">
        <div id="content" class="transition duration-500 opacity-0 translate-y-20 p-4 bg-white rounded-2xl border border-neutral-200"></div>
    </div>

    <script>
        async function loadPost() {
        const params = new URLSearchParams(window.location.search);
        const fileName = params.get("post");

        if (!fileName) {
            document.getElementById("content").innerHTML = "<p>Post not found.</p>";
            return;
        }

        const repo = "andika-journal";
        const user = "andikasujanadi";
        const rawUrl = `https://raw.githubusercontent.com/${user}/${repo}/main/posts/${fileName}.md`;

        try {
            const response = await fetch(rawUrl);
            if (!response.ok) throw new Error("Failed to load post.");
            
            let markdown = await response.text();
            let title = fileName, date = "", time = "", place = "", tags = [];

            const match = markdown.match(/^---\n([\s\S]*?)\n---\n/);
            if (match) {
                const meta = Object.fromEntries(
                    match[1].split("\n").map(line => line.match(/(\w+):\s*"(.*?)"/)?.slice(1, 3)).filter(Boolean)
                );
                title = meta.title || title;
                date = meta.date || "";
                time = meta.time || "";
                place = meta.place || "";
                tags = meta.tags.split(',') || [];
                markdown = markdown.replace(/^---\n[\s\S]*?\n---\n/, '');
            }

            document.getElementById("title").innerText = title;
            document.getElementById("date").innerText = date
                ? `Published on ${date}${time ? " at " + time : ""}${place ? " in " + place : ""}`
                : "";
            document.getElementById("content").innerHTML = marked.parse(markdown);
            document.title = `${title} - Andika's Blog`;
            if(tags){
                 document.getElementById("tags-container").innerHTML = `${tags.map(tag => `<span class="text-xs font-medium bg-blue-100 text-blue-600 px-3 pt-0.5 pb-1 rounded-full">${tag}</span>`).join(" ")}`;
            }

            document.querySelectorAll("#content a").forEach(link => {
                link.setAttribute("target", "_blank");
                link.setAttribute("rel", "noopener noreferrer");
            });

            setTimeout(() => {
                document.getElementById('title').classList.remove('opacity-0');
                document.getElementById('date').classList.remove('opacity-0');
                document.getElementById('tags-container').classList.remove('opacity-0');
                document.getElementById('content').classList.remove('opacity-0');
                document.getElementById('content').classList.remove('translate-y-20');
                document.getElementById('tags-container').classList.remove('translate-y-20');
            }, 50);

            document.querySelectorAll("pre code").forEach(codeBlock => {
                const pre = codeBlock.parentElement;
                const button = document.createElement("button");
                const pacman = document.createElement("div");
                button.innerText = "Copy";
                button.classList.add('copy-button');
                pacman.classList.add('pacman');
                button.addEventListener("click", () => {
                    navigator.clipboard.writeText(codeBlock.innerText).then(() => {
                        button.innerText = "Copied!";
                        setTimeout(() => button.innerText = "Copy", 2000);
                    });
                });
                pre.classList.add("relative", "p-4");
                pre.appendChild(button);
                pre.appendChild(pacman);
            });
        } catch (error) {
            console.error(error);
            document.getElementById("content").innerHTML = "<p>Error loading post.</p>";
        }
    }
    loadPost();
    let setting_window;
    const openSetting = () => {
        if(!document.getElementById('settingWindow')){
            setting_window = jendelaJS.addWindow({
                title:'Menu',
                theme:'jendela-libadwaita',
                body:setting.innerHTML.replaceAll('temp-id','id'),
                minimizeButton:false,
                resizeButton:false,
                minWidth:240,
                width:240,
                minHeight:140,
                top: 72,
                right: 8,
            });
        }
        else{
            setting_window.element.focus();
        }
    }
    </script>
</body>

</html>